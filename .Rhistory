last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
player_position = "",
rookie_year = "",
season = "2025-26", # We want the 2025-26 season
season_segment = "",
season_type = "Regular Season", # Want regular season, not playoffs
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]] #[[1]] returns a dataframe instead of a list for easier analysis
lg<-wnba_pbp %>%
group_by(distance_group) %>%
summarise(fg_pct=mean(made_shot),
distance=mean(shot_distance),
#distance_min=min(shot_distance),
#distance_max=max(shot_distance),
shots = n()) %>%
ungroup() %>%
mutate(per_shots=shots/sum(shots),
expected_points = case_when(
str_detect(distance_group, "2") ~ fg_pct * 2,
str_detect(distance_group, "Close 3") ~ fg_pct * 2,
str_detect(distance_group, "3") ~ fg_pct * 3,
TRUE ~ fg_pct * 2 ))
shots26 <- wehoop::wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
player_position = "",
rookie_year = "",
season = "2025-26", # We want the 2025-26 season
season_segment = "",
season_type = "Regular Season", # Want regular season, not playoffs
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]] #[[1]] returns a dataframe instead of a list for easier analysis
shots26 <- wehoop::wnba_shotchartdetail(
league_id = "00",
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
season = "2025-26")[[1]] # We want the 2025-26 season
shots26<-clean_names(shots26) #clean and standardize the column names
names(shots26) #Use names function to see all the variables in a tibble
freq(shots26$action_type) #freq command shows you frequency each level appears in a variable
shots26 <- wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
player_position = "",
rookie_year = "",
season = "2025-26", # We want the 2025-26 season
season_segment = "",
season_type = "Regular Season", # Want regular season, not playoffs
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]] #[[1]] returns a dataframe instead of a list for easier analysis
shots26 <- nba_shotchartdetail(
league_id = "00",
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
season = "2025-26")[[1]] # We want the 2025-26 season
shots26<-clean_names(shots26) #clean and standardize the column names
names(shots26) #Use names function to see all the variables in a tibble
freq(shots26$action_type) #freq command shows you frequency each level appears in a variable
#Create new dataframe with shot_distance variable for analysis
shots <- shots26 %>%
mutate( shot_distance = as.numeric(shot_distance),
distance_group = case_when(
shot_zone_basic == "Restricted Area" ~ "Restricted Area",
shot_distance > 3   & shot_distance <= 5 ~ "Close 3 to 5",
shot_distance > 5   & shot_distance <= 9 ~ "Close 5 to 9",
shot_distance > 9  & shot_distance <= 16 ~ "Mid-range",
shot_distance > 16  & shot_distance <= 22 ~ "Long 2",
(shot_distance > 16  & shot_distance <= 23) & shot_type=="2PT Field Goal" ~ "Long 2",
(shot_distance > 21  & shot_distance <= 23) & shot_type=="3PT Field Goal" ~ "Short 3",
shot_distance > 23  & shot_distance <= 24 ~ "Short 3",
shot_distance > 24  & shot_distance <= 27 ~ "Med 3",
shot_distance > 27  & shot_distance <= 30 ~ "Long 3",
shot_distance > 30  & shot_distance <= 35 ~ "Really Long 3",
shot_distance > 35   ~ "Super Really Long 3",
TRUE ~ NA_character_),
distance_group = factor(distance_group,
levels = c("Restricted Area", "Close 3 to 5", "Close 5 to 9", "Mid-range",
"Long 2", "Short 3", "Med 3", "Long 3",  "Really Long 3", "Super Really Long 3")),
made_shot=if_else(shot_made_flag==1, 1, 0),
driving = case_when(
str_detect(action_type, "Driving") ~ 1,
TRUE ~ 0 ),
jump_shot = case_when(
str_detect(action_type, "Jump") ~ 1,
TRUE ~ 0 ))
made<-shots %>%
group_by(action_type, shot_type) %>%
summarise(fg_per=mean(made_shot, na.rm=T),
shots=n())
#Get abbreviations into the tibble for easier plotting
team_lookup <- tibble::tribble(
~team_name,               ~team_abbrev,
"Atlanta Hawks",          "ATL",
"Boston Celtics",         "BOS",
"Brooklyn Nets",          "BKN",
"Charlotte Hornets",      "CHA",
"Chicago Bulls",          "CHI",
"Cleveland Cavaliers",    "CLE",
"Dallas Mavericks",       "DAL",
"Denver Nuggets",         "DEN",
"Detroit Pistons",        "DET",
"Golden State Warriors",  "GSW",
"Houston Rockets",        "HOU",
"Indiana Pacers",         "IND",
"LA Clippers",            "LAC",
"Los Angeles Lakers",     "LAL",
"Memphis Grizzlies",      "MEM",
"Miami Heat",             "MIA",
"Milwaukee Bucks",        "MIL",
"Minnesota Timberwolves", "MIN",
"New Orleans Pelicans",   "NOP",
"New York Knicks",        "NYK",
"Oklahoma City Thunder",  "OKC",
"Orlando Magic",          "ORL",
"Philadelphia 76ers",     "PHI",
"Phoenix Suns",           "PHX",
"Portland Trail Blazers", "POR",
"Sacramento Kings",       "SAC",
"San Antonio Spurs",      "SAS",
"Toronto Raptors",        "TOR",
"Utah Jazz",              "UTA",
"Washington Wizards",     "WAS")
shots <- shots %>%
left_join(team_lookup, by = "team_name")
shots26 <- wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
player_position = "",
rookie_year = "",
season = "2025-26", # We want the 2025-26 season
season_segment = "",
season_type = "Regular Season", # Want regular season, not playoffs
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]] #[[1]] returns a dataframe instead of a list for easier analysis
shots26 <- wnba_shotchartdetail(
league_id = "00",
player_id = "0", # This is "0" to indicate we want all players. You'd use a specific player's ID (more in a moment) here to get the data just for them
season = "2025-26")[[1]] # We want the 2025-26 season
shots26<-clean_names(shots26) #clean and standardize the column names
names(shots26) #Use names function to see all the variables in a tibble
freq(shots26$action_type) #freq command shows you frequency each level appears in a variable
#Create new dataframe with shot_distance variable for analysis
shots <- shots26 %>%
mutate( shot_distance = as.numeric(shot_distance),
distance_group = case_when(
shot_zone_basic == "Restricted Area" ~ "Restricted Area",
shot_distance > 3   & shot_distance <= 5 ~ "Close 3 to 5",
shot_distance > 5   & shot_distance <= 9 ~ "Close 5 to 9",
shot_distance > 9  & shot_distance <= 16 ~ "Mid-range",
shot_distance > 16  & shot_distance <= 22 ~ "Long 2",
(shot_distance > 16  & shot_distance <= 23) & shot_type=="2PT Field Goal" ~ "Long 2",
(shot_distance > 21  & shot_distance <= 23) & shot_type=="3PT Field Goal" ~ "Short 3",
shot_distance > 23  & shot_distance <= 24 ~ "Short 3",
shot_distance > 24  & shot_distance <= 27 ~ "Med 3",
shot_distance > 27  & shot_distance <= 30 ~ "Long 3",
shot_distance > 30  & shot_distance <= 35 ~ "Really Long 3",
shot_distance > 35   ~ "Super Really Long 3",
TRUE ~ NA_character_),
distance_group = factor(distance_group,
levels = c("Restricted Area", "Close 3 to 5", "Close 5 to 9", "Mid-range",
"Long 2", "Short 3", "Med 3", "Long 3",  "Really Long 3", "Super Really Long 3")),
made_shot=if_else(shot_made_flag==1, 1, 0),
driving = case_when(
str_detect(action_type, "Driving") ~ 1,
TRUE ~ 0 ),
jump_shot = case_when(
str_detect(action_type, "Jump") ~ 1,
TRUE ~ 0 ))
made<-shots %>%
group_by(action_type, shot_type) %>%
summarise(fg_per=mean(made_shot, na.rm=T),
shots=n())
#Create new dataframe with shot_distance variable for analysis
shots <- shots26 %>%
mutate( shot_distance = as.numeric(shot_distance),
distance_group = case_when(
shot_zone_basic == "Restricted Area" ~ "Restricted Area",
shot_distance > 3   & shot_distance <= 5 ~ "Close 3 to 5",
shot_distance > 5   & shot_distance <= 9 ~ "Close 5 to 9",
shot_distance > 9  & shot_distance <= 16 ~ "Mid-range",
shot_distance > 16  & shot_distance <= 22 ~ "Long 2",
(shot_distance > 16  & shot_distance <= 23) & shot_type=="2PT Field Goal" ~ "Long 2",
(shot_distance > 21  & shot_distance <= 23) & shot_type=="3PT Field Goal" ~ "Short 3",
shot_distance > 23  & shot_distance <= 24 ~ "Short 3",
shot_distance > 24  & shot_distance <= 27 ~ "Med 3",
shot_distance > 27  & shot_distance <= 30 ~ "Long 3",
shot_distance > 30  & shot_distance <= 35 ~ "Really Long 3",
shot_distance > 35   ~ "Super Really Long 3",
TRUE ~ NA_character_),
distance_group = factor(distance_group,
levels = c("Restricted Area", "Close 3 to 5", "Close 5 to 9", "Mid-range",
"Long 2", "Short 3", "Med 3", "Long 3",  "Really Long 3", "Super Really Long 3")),
made_shot=if_else(shot_made_flag==1, 1, 0),
driving = case_when(
str_detect(action_type, "Driving") ~ 1,
TRUE ~ 0 ),
jump_shot = case_when(
str_detect(action_type, "Jump") ~ 1,
TRUE ~ 0 ))
made<-shots %>%
group_by(action_type, shot_type) %>%
summarise(fg_per=mean(made_shot, na.rm=T),
shots=n())
View(made)
lg<-shots26 %>%
group_by(distance_group) %>%
summarise(fg_pct=mean(made_shot),
distance=mean(shot_distance),
#distance_min=min(shot_distance),
#distance_max=max(shot_distance),
shots = n()) %>%
ungroup() %>%
mutate(per_shots=shots/sum(shots),
expected_points = case_when(
str_detect(distance_group, "2") ~ fg_pct * 2,
str_detect(distance_group, "Close 3") ~ fg_pct * 2,
str_detect(distance_group, "3") ~ fg_pct * 3,
TRUE ~ fg_pct * 2 ))
lg<-shots %>%
group_by(distance_group) %>%
summarise(fg_pct=mean(made_shot),
distance=mean(shot_distance),
#distance_min=min(shot_distance),
#distance_max=max(shot_distance),
shots = n()) %>%
ungroup() %>%
mutate(per_shots=shots/sum(shots),
expected_points = case_when(
str_detect(distance_group, "2") ~ fg_pct * 2,
str_detect(distance_group, "Close 3") ~ fg_pct * 2,
str_detect(distance_group, "3") ~ fg_pct * 3,
TRUE ~ fg_pct * 2 ))
print(lg)
lg_ft <- lg %>%
mutate(
fg_pct = fg_pct * 100,
per_shots = per_shots * 100) %>%
flextable() %>%
set_header_labels(
distance_group = "FG Distance",
fg_pct = "FG Percent",
distance = "Avg Shot Distance",
shots = "Shots Taken",
per_shots = "% of Shots",
expected_points = "Expected Value\nof Shot") %>%
colformat_double(
digits = 2) %>%
colformat_double(
j = c("fg_pct", "per_shots"),
digits = 1,
suffix = "%") %>%
autofit()
lg_ft
View(shots)
shots26 <- wehoop::wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0",
player_position = "",
rookie_year = "",
season = "2025-26",
season_segment = "",
season_type = "Regular Season",
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]]
View(shots26)
shots26 <- wehoop::wnba_shotchartdetail(
league_id = "00",
player_id = "0",
season = "2025-26")[[1]]
shots26<-clean_names(shots26)
names(shots26)
freq(shots26$action_type)
shots26 <- wehoop::wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0",
player_position = "",
rookie_year = "",
season = "2025-26",
season_segment = "",
season_type = "Regular Season",
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]]
shots26 <- wehoop::wnba_shotchartdetail(
league_id = "00",
player_id = "0",
season = "2025-26")[[1]]
shots26<-clean_names(shots26)
names(shots26)
freq(shots26$action_type)
View(shots26)
wnba_pbp <- wehoop::load_wnba_pbp(2025)
View(wnba_pbp)
shots26 <- wehoop::wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "00",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0",
player_position = "",
rookie_year = "",
season = "2025-26",
season_segment = "",
season_type = "Regular Season",
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]]
shots26 <- wehoop::wnba_shotchartdetail(
league_id = "00",
player_id = "0",
season = "2025-26")[[1]]
View(shots26)
shots26<-clean_names(shots26)
names(shots26)
freq(shots26$action_type)
shots26 <- wehoop::wnba_shotchartdetail(
context_measure = "FGA",
date_from = "",
date_to = "",
game_id = "",
game_segment = "",
last_n_games = 0,
league_id = "10",
location = "",
month = 0,
opponent_team_id = 0,
outcome = "",
period = 0,
player_id = "0",
player_position = "",
rookie_year = "",
season = "2025-26",
season_segment = "",
season_type = "Regular Season",
team_id = 0,
vs_conference = "",
vs_division = ""
)[[1]]
shots26 <- wehoop::wnba_shotchartdetail(
league_id = "10",
player_id = "0",
season = "2025-26")[[1]]
shots26<-clean_names(shots26)
names(shots26)
freq(shots26$action_type)
shots <- shots26 %>%
mutate( shot_distance = as.numeric(shot_distance),
distance_group = case_when(
shot_zone_basic == "Restricted Area" ~ "Restricted Area",
shot_distance > 3   & shot_distance <= 5 ~ "Close 3 to 5",
shot_distance > 5   & shot_distance <= 9 ~ "Close 5 to 9",
shot_distance > 9  & shot_distance <= 16 ~ "Mid-range",
shot_distance > 16  & shot_distance <= 22 ~ "Long 2",
(shot_distance > 16  & shot_distance <= 23) & shot_type=="2PT Field Goal" ~ "Long 2",
(shot_distance > 21  & shot_distance <= 23) & shot_type=="3PT Field Goal" ~ "Short 3",
shot_distance > 23  & shot_distance <= 24 ~ "Short 3",
shot_distance > 24  & shot_distance <= 27 ~ "Med 3",
shot_distance > 27  & shot_distance <= 30 ~ "Long 3",
shot_distance > 30  & shot_distance <= 35 ~ "Really Long 3",
shot_distance > 35   ~ "Super Really Long 3",
TRUE ~ NA_character_),
distance_group = factor(distance_group,
levels = c("Restricted Area", "Close 3 to 5", "Close 5 to 9", "Mid-range",
"Long 2", "Short 3", "Med 3", "Long 3",  "Really Long 3", "Super Really Long 3")),
made_shot=if_else(shot_made_flag==1, 1, 0),
driving = case_when(
str_detect(action_type, "Driving") ~ 1,
TRUE ~ 0 ),
jump_shot = case_when(
str_detect(action_type, "Jump") ~ 1,
TRUE ~ 0 ))
made<-shots %>%
group_by(action_type, shot_type) %>%
summarise(fg_per=mean(made_shot, na.rm=T),
shots=n())
lg<-shots %>%
group_by(distance_group) %>%
summarise(fg_pct=mean(made_shot),
distance=mean(shot_distance),
#distance_min=min(shot_distance),
#distance_max=max(shot_distance),
shots = n()) %>%
ungroup() %>%
mutate(per_shots=shots/sum(shots),
expected_points = case_when(
str_detect(distance_group, "2") ~ fg_pct * 2,
str_detect(distance_group, "Close 3") ~ fg_pct * 2,
str_detect(distance_group, "3") ~ fg_pct * 3,
TRUE ~ fg_pct * 2 ))
print(lg)
lg_ft <- lg %>%
mutate(
fg_pct = fg_pct * 100,
per_shots = per_shots * 100) %>%
flextable() %>%
set_header_labels(
distance_group = "FG Distance",
fg_pct = "FG Percent",
distance = "Avg Shot Distance",
shots = "Shots Taken",
per_shots = "% of Shots",
expected_points = "Expected Value\nof Shot") %>%
colformat_double(
digits = 2) %>%
colformat_double(
j = c("fg_pct", "per_shots"),
digits = 1,
suffix = "%") %>%
autofit()
lg_ft
View(shots26)
install.packages("flexboard")
install.packages("flexdashboard")
setwd("~/GitHub/hw_test")
library(flexdashboard) # always
map1link=
viz1=url(map1link)
Preparing the dashboard based on the instructions given at @magallanes_reyes_data_2022, and @aden-buie_flexdashboard_2026.
library(flexdashboard) # always
map1link="https://github.com/dvis690-cs/hw_test/raw/main/del1Draft.rds"
viz1=url(map1link)
map2link="https://github.com/dvis690-cs/hw_test/raw/main/del2Draft.rds"
viz2=url(map2link)
map3link="https://github.com/dvis690-cs/hw_test/raw/main/del3Draft.rds"
viz3=url(map3link)
map4link="https://github.com/dvis690-cs/hw_test/raw/main/del4Draft.rds"
viz4=url(map4link)
readRDS(viz1)
readRDS(viz2)
readRDS(viz1)
readRDS(viz3)
readRDS(viz4)
